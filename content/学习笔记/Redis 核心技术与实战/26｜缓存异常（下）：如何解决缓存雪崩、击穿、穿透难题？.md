---

title: 26｜缓存异常（下）：如何解决缓存雪崩、击穿、穿透难题？
tags:
- Redis
- mindmap-plugin: basic
createdAt: 2023-05-23T21:02:06+08:00

---

- 三大问题的原因和应对方案
  - ![image.png](https://cdn.jsdelivr.net/gh/11ze/static/images/redis-26-1.png)

  - 1. 缓存雪崩

    - 大量的应用请求无法在 Redis 缓存中进行处理，紧接着，应用将大量请求发送到数据库层，导致数据库层的压力激增。

  - 2. 缓存击穿

    - 针对某个访问非常频繁的热点数据的请求，无法在缓存中进行处理，紧接着，访问该数据的大量请求，一下子都发送到了后端数据库，导致了数据库压力激增，会影响数据库处理其他请求。
    - 缓存击穿的情况，经常发生在热点数据过期失效时。

  - 3. 缓存穿透

    - 要访问的数据既不在 Redis 缓存中，也不在数据库中，导致请求在访问缓存时，发生缓存缺失，再去访问数据库时，发现数据库中也没有要访问的数据。
    - 此时缓存成了摆设。
    - 同时给缓存和数据库巨大压力。

- 尽量使用预防式方案

  - 1-1. 给缓存数据的过期时间加上小的随机数
  - 1-5. Redis 缓存主从集群
  - 2-1. 不给热点数据设置过期时间，一直保留
  - 3-3. 请求入口签到对请求合法性进行检查

- 2. Redis 的布隆过滤器

  - 使用 String 类型实现，是一个 bigkey
  - 建议使用时单独部署一个实例
  - 直接配置参数使用即可
  - 4.0 提供了布隆过滤器模块，4.0 以下需要引入第三方库
  - 在判别数据不存在时，不存在误判，且速度非常快

- 思考题：可以采用服务熔断、服务降级、请求限流的方法来应对缓存穿透问题吗？

  - 没必要
  - 1. 三个机制是为了解决 Redis 实例没有起到缓存层作用的情况，穿透实质是查询缓存和数据库中没有的数据
  - 2. 在穿透的场景下，除非人工介入，否则无论过去多久都不太可能自然恢复
  - 3. 问题没有解决的同时降低了用户体验
